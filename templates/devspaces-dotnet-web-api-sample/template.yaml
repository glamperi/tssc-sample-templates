apiVersion: scaffolder.backstage.io/v1beta3
kind: Template
metadata:
  name: dotnet-web-api-sample
  title: dot net meta ai 2
spec:
  type: service
  parameters:
     - title: Application Information
      required:
        - name
      properties:
        name:
          title: Project Name
          type: string
          description: The name of the project
          default: dotnet-web-api-sample
  steps:
    - id: template
      name: Fetch template
      action: fetch:template
      input:
        url: https://github.com/glamperi/devspaces-dotnet-web-api-sample
        values:
          projectName: ${{ parameters.name }}
    - id: devspaces
      name: Create Dev Spaces workspace
      action: bash
      input:
        script: |
          curl -X POST \
            https://devspaces.apps.cluster-vnfjq.vnfjq.sandbox1957.opentlc.com/dashboard/api/workspaces \
            -H 'Content-Type: application/json' \
            -d '{"name": "${{ parameters.name }}", "description": "Dev Spaces workspace for ${{ parameters.name }}"}'
